project(tickless)
add_executable(${PROJECT_NAME} main.c)

# AVRTOS Configuration
target_compile_definitions(${PROJECT_NAME} PUBLIC
	CONFIG_KERNEL_SYSLOCK_HW_TIMER=3

	CONFIG_KERNEL_TICKLESS=1
	CONFIG_KERNEL_TICKLESS_DEBUG=1
	CONFIG_STDIO_PRINTF_TO_USART=0

	# CONFIG_KERNEL_SYSCLOCK_PERIOD_US=16
	# CONFIG_KERNEL_TIME_SLICE_US=16
	
	CONFIG_KERNEL_DEBUG_GPIO=11
	CONFIG_KERNEL_DEBUG_GPIO_SYSTICK=1

	# CONFIG_KERNEL_SYSCLOCK_DEBUG=1
	# CONFIG_KERNEL_SCHEDULER_DEBUG=1


	CONFIG_KERNEL_ASSERT=1
	CONFIG_KERNEL_DELAY_OBJECT_U32=1
	CONFIG_KERNEL_THREAD_TERMINATION_TYPE=1
	CONFIG_KERNEL_UPTIME=1
)

target_link_avrtos(${PROJECT_NAME})

target_prepare_env(${PROJECT_NAME})
