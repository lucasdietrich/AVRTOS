; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[platformio]
; comment followinng line and select default profile to build
; all samples at once
default_envs = ArduinoPIOEasy

src_dir = .
include_dir = src

#_____________________________________________________________________________#

[env]
platform = atmelavr
board = megaatmega2560
; board = megaatmega2560, pro16MHzatmega328, ethernet, ...

; Build options debug/release
; build_type = debug

build_src_filter =
    +<src/avrtos/>

build_flags = 
;     -Wl,-T./architecture/avr/avrtos-avr5.xn
    -Wl,-T./architecture/avr/avrtos-avr6.xn   

upload_port = /dev/ttyACM0
monitor_port = /dev/ttyACM0
monitor_speed = 115200
monitor_flags = 
	--echo
    	--eol
	--raw
	LF
monitor_filters =
	colorize
	; debug

; debug
; release
build_type = release

# examples
[env:AllocBump]
build_src_filter =
    ${env.build_src_filter}
    +<examples/alloc-bump>

build_flags =
    ${env.build_flags}
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_STDIO_USART=0
	-DCONFIG_SERIAL_AUTO_INIT=1

[env:AllocGlobal]
build_src_filter =
    ${env.build_src_filter}
    +<examples/alloc-global>

build_flags =
    ${env.build_flags}
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_STDIO_USART=0
	-DCONFIG_SERIAL_AUTO_INIT=1
	-DCONFIG_KERNEL_GLOBAL_ALLOCATOR_SIZE=511

[env:AllocSlab]
build_src_filter =
    ${env.build_src_filter}
    +<examples/alloc-slab>

build_flags =
    ${env.build_flags}
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_STDIO_USART=0
	-DCONFIG_SERIAL_AUTO_INIT=1

[env:ArduinoPIOBlinkingLed]
platform = atmelavr
framework = arduino

build_src_filter =
    ${env.build_src_filter}
    +<examples/ArduinoPIOBlinkingLed>

build_flags =
	-DCONFIG_AVRTOS_LINKER_SCRIPT=0
	-DCONFIG_KERNEL_AUTO_INIT=1
	-DCONFIG_KERNEL_TIMERS=1
	-DCONFIG_KERNEL_EVENTS=1
	-DCONFIG_KERNEL_EVENTS_ALLOW_NO_WAIT=1
	-DCONFIG_KERNEL_ATOMIC_API=1
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_SYSTEM_WORKQUEUE_ENABLE=0
	-DCONFIG_STDIO_USART=0
	-DCONFIG_THREAD_MAIN_STACK_SIZE=512
	-DCONFIG_USE_STDLIB_HEAP_MALLOC_MAIN=1
	-DCONFIG_KERNEL_THREAD_TERMINATION_TYPE=1
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=2
	-DCONFIG_KERNEL_DELAY_OBJECT_U32=1
	-DCONFIG_KERNEL_THREAD_IDLE=1
	-DCONFIG_KERNEL_THREAD_IDLE_ADD_STACK=96
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_THREAD_STACK_SENTINEL=0
	-DCONFIG_KERNEL_ASSERT=0
	-DCONFIG_KERNEL_ARGS_CHECKS=0
	-DCONFIG_SERIAL_AUTO_INIT=1
	-DCONFIG_SERIAL_USART_BAUDRATE=9600lu
	-DCONFIG_THREAD_MAIN_COOPERATIVE=1
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000llu
	-DCONFIG_KERNEL_TIME_SLICE_US=1000llu

monitor_speed = 9600

[env:ArduinoPIODiningPhilisophers]
platform = atmelavr
framework = arduino

build_src_filter =
    ${env.build_src_filter}
    +<examples/ArduinoPIODiningPhilisophers>

build_flags =
	-DCONFIG_AVRTOS_LINKER_SCRIPT=0
	-DCONFIG_KERNEL_AUTO_INIT=1
	-DCONFIG_KERNEL_TIMERS=1
	-DCONFIG_KERNEL_EVENTS=1
	-DCONFIG_KERNEL_EVENTS_ALLOW_NO_WAIT=1
	-DCONFIG_KERNEL_ATOMIC_API=1
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_SYSTEM_WORKQUEUE_ENABLE=0
	-DCONFIG_STDIO_USART=0
	-DCONFIG_THREAD_MAIN_STACK_SIZE=512
	-DCONFIG_USE_STDLIB_HEAP_MALLOC_MAIN=1
	-DCONFIG_KERNEL_THREAD_TERMINATION_TYPE=1
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=2
	-DCONFIG_KERNEL_DELAY_OBJECT_U32=1
	-DCONFIG_KERNEL_THREAD_IDLE=1
	-DCONFIG_KERNEL_THREAD_IDLE_ADD_STACK=96
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_THREAD_STACK_SENTINEL=0
	-DCONFIG_KERNEL_ASSERT=0
	-DCONFIG_KERNEL_ARGS_CHECKS=0
	-DCONFIG_SERIAL_AUTO_INIT=1
	-DCONFIG_SERIAL_USART_BAUDRATE=9600lu
	-DCONFIG_THREAD_MAIN_COOPERATIVE=1
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000llu
	-DCONFIG_KERNEL_TIME_SLICE_US=1000llu

monitor_speed = 9600

[env:ArduinoPIODrivers]
platform = atmelavr
framework = arduino

build_src_filter =
    ${env.build_src_filter}
    +<examples/ArduinoPIODrivers>

build_flags =
	-DCONFIG_AVRTOS_LINKER_SCRIPT=0
	-DCONFIG_KERNEL_AUTO_INIT=1
	-DCONFIG_KERNEL_TIMERS=1
	-DCONFIG_KERNEL_EVENTS=1
	-DCONFIG_KERNEL_EVENTS_ALLOW_NO_WAIT=1
	-DCONFIG_KERNEL_ATOMIC_API=1
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_SYSTEM_WORKQUEUE_ENABLE=0
	-DCONFIG_STDIO_USART=0
	-DCONFIG_THREAD_MAIN_STACK_SIZE=512
	-DCONFIG_USE_STDLIB_HEAP_MALLOC_MAIN=1
	-DCONFIG_KERNEL_THREAD_TERMINATION_TYPE=1
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=2
	-DCONFIG_KERNEL_DELAY_OBJECT_U32=1
	-DCONFIG_KERNEL_THREAD_IDLE=1
	-DCONFIG_KERNEL_THREAD_IDLE_ADD_STACK=96
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_THREAD_STACK_SENTINEL=0
	-DCONFIG_KERNEL_ASSERT=0
	-DCONFIG_KERNEL_ARGS_CHECKS=0
	-DCONFIG_SERIAL_AUTO_INIT=1
	-DCONFIG_SERIAL_USART_BAUDRATE=9600lu
	-DCONFIG_THREAD_MAIN_COOPERATIVE=1
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000llu
	-DCONFIG_KERNEL_TIME_SLICE_US=1000llu

monitor_speed = 9600

[env:ArduinoPIOEasy]
platform = atmelavr
framework = arduino

build_src_filter =
    ${env.build_src_filter}
    +<examples/ArduinoPIOEasy>

build_flags =
	-DCONFIG_AVRTOS_LINKER_SCRIPT=0
	-DCONFIG_KERNEL_AUTO_INIT=1
	-DCONFIG_KERNEL_TIMERS=1
	-DCONFIG_KERNEL_EVENTS=1
	-DCONFIG_KERNEL_EVENTS_ALLOW_NO_WAIT=1
	-DCONFIG_KERNEL_ATOMIC_API=1
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_SYSTEM_WORKQUEUE_ENABLE=0
	-DCONFIG_STDIO_USART=0
	-DCONFIG_THREAD_MAIN_STACK_SIZE=512
	-DCONFIG_USE_STDLIB_HEAP_MALLOC_MAIN=1
	-DCONFIG_KERNEL_THREAD_TERMINATION_TYPE=1
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=2
	-DCONFIG_KERNEL_DELAY_OBJECT_U32=1
	-DCONFIG_KERNEL_THREAD_IDLE=1
	-DCONFIG_KERNEL_THREAD_IDLE_ADD_STACK=96
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_THREAD_STACK_SENTINEL=0
	-DCONFIG_KERNEL_ASSERT=0
	-DCONFIG_KERNEL_ARGS_CHECKS=0
	-DCONFIG_SERIAL_AUTO_INIT=1
	-DCONFIG_SERIAL_USART_BAUDRATE=9600lu
	-DCONFIG_THREAD_MAIN_COOPERATIVE=1
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000llu
	-DCONFIG_KERNEL_TIME_SLICE_US=1000llu

monitor_speed = 9600

[env:ArduinoPIOHelloWorld]
platform = atmelavr
framework = arduino

build_src_filter =
    ${env.build_src_filter}
    +<examples/ArduinoPIOHelloWorld>

build_flags =
	-DCONFIG_AVRTOS_LINKER_SCRIPT=0
	-DCONFIG_KERNEL_AUTO_INIT=1
	-DCONFIG_KERNEL_TIMERS=1
	-DCONFIG_KERNEL_EVENTS=1
	-DCONFIG_KERNEL_EVENTS_ALLOW_NO_WAIT=1
	-DCONFIG_KERNEL_ATOMIC_API=1
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_SYSTEM_WORKQUEUE_ENABLE=0
	-DCONFIG_STDIO_USART=0
	-DCONFIG_THREAD_MAIN_STACK_SIZE=512
	-DCONFIG_USE_STDLIB_HEAP_MALLOC_MAIN=1
	-DCONFIG_KERNEL_THREAD_TERMINATION_TYPE=1
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=2
	-DCONFIG_KERNEL_DELAY_OBJECT_U32=1
	-DCONFIG_KERNEL_THREAD_IDLE=1
	-DCONFIG_KERNEL_THREAD_IDLE_ADD_STACK=96
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_THREAD_STACK_SENTINEL=0
	-DCONFIG_KERNEL_ASSERT=0
	-DCONFIG_KERNEL_ARGS_CHECKS=0
	-DCONFIG_SERIAL_AUTO_INIT=1
	-DCONFIG_SERIAL_USART_BAUDRATE=9600lu
	-DCONFIG_THREAD_MAIN_COOPERATIVE=1
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000llu
	-DCONFIG_KERNEL_TIME_SLICE_US=1000llu

monitor_speed = 9600

[env:ArduinoPIOMinimalExample]
platform = atmelavr
framework = arduino

build_src_filter =
    ${env.build_src_filter}
    +<examples/ArduinoPIOMinimalExample>

build_flags =
	-DCONFIG_AVRTOS_LINKER_SCRIPT=0
	-DCONFIG_KERNEL_AUTO_INIT=1
	-DCONFIG_KERNEL_TIMERS=1
	-DCONFIG_KERNEL_EVENTS=1
	-DCONFIG_KERNEL_EVENTS_ALLOW_NO_WAIT=1
	-DCONFIG_KERNEL_ATOMIC_API=1
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_SYSTEM_WORKQUEUE_ENABLE=0
	-DCONFIG_STDIO_USART=0
	-DCONFIG_THREAD_MAIN_STACK_SIZE=512
	-DCONFIG_USE_STDLIB_HEAP_MALLOC_MAIN=1
	-DCONFIG_KERNEL_THREAD_TERMINATION_TYPE=1
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=2
	-DCONFIG_KERNEL_DELAY_OBJECT_U32=1
	-DCONFIG_KERNEL_THREAD_IDLE=1
	-DCONFIG_KERNEL_THREAD_IDLE_ADD_STACK=96
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_THREAD_STACK_SENTINEL=0
	-DCONFIG_KERNEL_ASSERT=0
	-DCONFIG_KERNEL_ARGS_CHECKS=0
	-DCONFIG_SERIAL_AUTO_INIT=1
	-DCONFIG_SERIAL_USART_BAUDRATE=9600lu
	-DCONFIG_THREAD_MAIN_COOPERATIVE=1
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000llu
	-DCONFIG_KERNEL_TIME_SLICE_US=1000llu

monitor_speed = 9600

[env:ArduinoPIOShell]
platform = atmelavr
framework = arduino

build_src_filter =
    ${env.build_src_filter}
    +<examples/ArduinoPIOShell>

build_flags =
	-DCONFIG_AVRTOS_LINKER_SCRIPT=0
	-DCONFIG_KERNEL_AUTO_INIT=1
	-DCONFIG_KERNEL_TIMERS=1
	-DCONFIG_KERNEL_EVENTS=1
	-DCONFIG_KERNEL_EVENTS_ALLOW_NO_WAIT=1
	-DCONFIG_KERNEL_ATOMIC_API=1
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_SYSTEM_WORKQUEUE_ENABLE=0
	-DCONFIG_STDIO_USART=0
	-DCONFIG_THREAD_MAIN_STACK_SIZE=512
	-DCONFIG_USE_STDLIB_HEAP_MALLOC_MAIN=1
	-DCONFIG_KERNEL_THREAD_TERMINATION_TYPE=1
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=2
	-DCONFIG_KERNEL_DELAY_OBJECT_U32=1
	-DCONFIG_KERNEL_THREAD_IDLE=1
	-DCONFIG_KERNEL_THREAD_IDLE_ADD_STACK=96
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_THREAD_STACK_SENTINEL=0
	-DCONFIG_KERNEL_ASSERT=0
	-DCONFIG_KERNEL_ARGS_CHECKS=0
	-DCONFIG_SERIAL_AUTO_INIT=1
	-DCONFIG_SERIAL_USART_BAUDRATE=9600lu
	-DCONFIG_THREAD_MAIN_COOPERATIVE=1
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000llu
	-DCONFIG_KERNEL_TIME_SLICE_US=1000llu

monitor_speed = 9600

[env:Atomic]
build_src_filter =
    ${env.build_src_filter}
    +<examples/atomic>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_ASSERT=1
	-DCONFIG_KERNEL_ATOMIC_API=1

[env:BlinkingLed]
build_src_filter =
    ${env.build_src_filter}
    +<examples/blinking-led>

build_flags =
    ${env.build_flags}
	-DCONFIG_THREAD_EXPLICIT_MAIN_STACK=0
	-DCONFIG_KERNEL_COOPERATIVE_THREADS=1
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
	-DCONFIG_KERNEL_TIME_SLICE_US=1000
	-DCONFIG_KERNEL_TIME_SLICE_US=1000
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0
	-DCONFIG_KERNEL_THREAD_IDLE=1
	-DCONFIG_KERNEL_THREAD_IDLE_ADD_STACK=0

[env:Canaries]
build_src_filter =
    ${env.build_src_filter}
    +<examples/canaries>

build_flags =
    ${env.build_flags}
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1

[env:CoopMultithreadingDemo]
build_src_filter =
    ${env.build_src_filter}
    +<examples/coop-multithreading-demo>

build_flags =
    ${env.build_flags}
	-DCONFIG_THREAD_MAIN_STACK_SIZE=0x100
	-DCONFIG_KERNEL_COOPERATIVE_THREADS=0
	-DCONFIG_THREAD_IDLE_COOPERATIVE=0

[env:Cpp]
build_src_filter =
    ${env.build_src_filter}
    +<examples/cpp>

build_flags =
    ${env.build_flags}
	-DCONFIG_THREAD_EXPLICIT_MAIN_STACK=0
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
	-DCONFIG_KERNEL_TIME_SLICE_US=50000
	-DCONFIG_KERNEL_ASSERT=1
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0

[env:DataStructures]
build_src_filter =
    ${env.build_src_filter}
    +<examples/data-structures>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_COOPERATIVE_THREADS=0
	-DCONFIG_KERNEL_THREAD_IDLE=0
	-DCONFIG_STDIO_USART=0

[env:DemoButton]
build_src_filter =
    ${env.build_src_filter}
    +<examples/demo-button>

build_flags =
    ${env.build_flags}
	-DCONFIG_STDIO_USART=0
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_KERNEL_FAULT_VERBOSITY=0

[env:DrvApiTimers]
build_src_filter =
    ${env.build_src_filter}
    +<examples/drv-api-timers>

build_flags =
    ${env.build_flags}
	-DCONFIG_INTERRUPT_POLICY=1
	-DCONFIG_STDIO_USART=0
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
	-DCONFIG_DRIVERS_TIMER2_API=1
	-DCONFIG_DRIVERS_TIMER4_API=1
	-DCONFIG_DRIVERS_TIMER5_API=1

[env:DrvExti]
build_src_filter =
    ${env.build_src_filter}
    +<examples/drv-exti>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0

[env:DrvGpio]
build_src_filter =
    ${env.build_src_filter}
    +<examples/drv-gpio>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0

[env:DrvI2CTcn75]
build_src_filter =
    ${env.build_src_filter}
    +<examples/drv-i2c-tcn75>

build_flags =
    ${env.build_flags}
	-DCONFIG_THREAD_MAIN_STACK_SIZE=0x200
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0
	-DCONFIG_STDIO_USART=0
	-DCONFIG_KERNEL_THREAD_IDLE_ADD_STACK=50
	-DCONFIG_SYSTEM_WORKQUEUE_ENABLE=0
	-DCONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=0x200
	-DCONFIG_AVRTOS_BANNER_ENABLE=1
	-DCONFIG_SERIAL_AUTO_INIT=1
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_I2C_INTERRUPT_DRIVEN=1
	-DCONFIG_I2C_DEBUG=0

[env:DrvSpiCanMcp2515]
build_src_filter =
    ${env.build_src_filter}
    +<examples/drv-spi-can-mcp2515>

build_flags =
    ${env.build_flags}
	-DCONFIG_STDIO_USART=0
	-DCONFIG_DEVICE_MCP2515=1
	-DCONFIG_SYSTEM_WORKQUEUE_ENABLE=1
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=2
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000
	-DCONFIG_KERNEL_TIME_SLICE_US=1000
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_THREAD_CANARIES=1

[env:DrvSpiMaster]
build_src_filter =
    ${env.build_src_filter}
    +<examples/drv-spi-master>

build_flags =
    ${env.build_flags}
	-DCONFIG_STDIO_USART=0
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000
	-DCONFIG_KERNEL_TIME_SLICE_US=1000
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_KERNEL_DEBUG_GPIO=5
	-DCONFIG_KERNEL_DEBUG_GPIO_SYSTICK=1

[env:DrvSpiMcp3008]
build_src_filter =
    ${env.build_src_filter}
    +<examples/drv-spi-mcp3008>

build_flags =
    ${env.build_flags}
	-DCONFIG_STDIO_USART=0
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000
	-DCONFIG_KERNEL_TIME_SLICE_US=1000
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_THREAD_CANARIES=1

[env:DrvSpiSlave]
build_src_filter =
    ${env.build_src_filter}
    +<examples/drv-spi-slave>

build_flags =
    ${env.build_flags}
	-DCONFIG_STDIO_USART=0
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
	-DCONFIG_KERNEL_TIME_SLICE_US=1000
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_SPI_ASYNC=1
	-DCONFIG_KERNEL_DEBUG_GPIO=4

[env:DrvTimer]
build_src_filter =
    ${env.build_src_filter}
    +<examples/drv-timer>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_THREAD_EXPLICIT_MAIN_STACK=0
	-DCONFIG_INTERRUPT_POLICY=1
	-DCONFIG_STDIO_USART=0
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
	-DCONFIG_KERNEL_TIME_SLICE_US=1000
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000
	-DCONFIG_KERNEL_DELAY_OBJECT_U32=1

[env:DrvTimers]
build_src_filter =
    ${env.build_src_filter}
    +<examples/drv-timers>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_THREAD_EXPLICIT_MAIN_STACK=0
	-DCONFIG_KERNEL_THREAD_IDLE=0
	-DCONFIG_INTERRUPT_POLICY=1
	-DCONFIG_STDIO_USART=0
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=0
	-DCONFIG_KERNEL_TIME_SLICE_US=4000
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000
	-DCONFIG_KERNEL_DELAY_OBJECT_U32=1
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0

[env:DrvTimersCtcToggle]
build_src_filter =
    ${env.build_src_filter}
    +<examples/drv-timers-ctc-toggle>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_COOPERATIVE_THREADS=1
	-DCONFIG_DEFAULT_KERNEL_SYSCLOCK_PERIOD_US=100000
	-DCONFIG_KERNEL_TIME_SLICE_US=100000
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=3
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_KERNEL_THREAD_IDLE=1
	-DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
	-DCONFIG_THREAD_MAIN_STACK_SIZE=1024
	-DCONFIG_STDIO_USART=0
	-DCONFIG_INTERRUPT_POLICY=1
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0

[env:DrvTimersPwm]
build_src_filter =
    ${env.build_src_filter}
    +<examples/drv-timers-pwm>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_COOPERATIVE_THREADS=1
	-DCONFIG_DEFAULT_KERNEL_SYSCLOCK_PERIOD_US=100000
	-DCONFIG_KERNEL_TIME_SLICE_US=100000
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=3
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_KERNEL_THREAD_IDLE=1
	-DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
	-DCONFIG_THREAD_MAIN_STACK_SIZE=1024
	-DCONFIG_STDIO_USART=0
	-DCONFIG_INTERRUPT_POLICY=1
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0

[env:DrvTimersPwmIcrn]
build_src_filter =
    ${env.build_src_filter}
    +<examples/drv-timers-pwm-icrn>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_COOPERATIVE_THREADS=1
	-DCONFIG_DEFAULT_KERNEL_SYSCLOCK_PERIOD_US=100000
	-DCONFIG_KERNEL_TIME_SLICE_US=100000
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=3
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_KERNEL_THREAD_IDLE=1
	-DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
	-DCONFIG_THREAD_MAIN_STACK_SIZE=1024
	-DCONFIG_STDIO_USART=0
	-DCONFIG_INTERRUPT_POLICY=1
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0

[env:DrvUsart]
build_src_filter =
    ${env.build_src_filter}
    +<examples/drv-usart>

build_flags =
    ${env.build_flags}
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_STDIO_USART=0

[env:DrvUsartAsync]
build_src_filter =
    ${env.build_src_filter}
    +<examples/drv-usart-async>

build_flags =
    ${env.build_flags}
	-DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
	-DCONFIG_THREAD_MAIN_STACK_SIZE=0x100
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0
	-DCONFIG_KERNEL_ASSERT=1
	-DCONFIG_STDIO_USART=0
	-DCONFIG_KERNEL_THREAD_IDLE_ADD_STACK=50
	-DCONFIG_DRIVERS_USART1_ASYNC=1
	-DCONFIG_SYSTEM_WORKQUEUE_ENABLE=1
	-DCONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=0x200

[env:Events]
build_src_filter =
    ${env.build_src_filter}
    +<examples/events>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_THREAD_IDLE=0
	-DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
	-DCONFIG_THREAD_MAIN_STACK_SIZE=0x80
	-DCONFIG_STDIO_USART=0
	-DCONFIG_KERNEL_TIMERS=0
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_KERNEL_EVENTS=1
	-DCONFIG_KERNEL_TIME_SLICE_US=1000
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0
	-DCONFIG_THREAD_STACK_SENTINEL=1
	-DCONFIG_KERNEL_API_NOINLINE=1

[env:FaultHook]
build_src_filter =
    ${env.build_src_filter}
    +<examples/fault-hook>

build_flags =
    ${env.build_flags}
	-DCONFIG_STDIO_USART=0
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_KERNEL_FAULT_VERBOSITY=1
	-DCONFIG_KERNEL_THREAD_TERMINATION_TYPE=-1

[env:Fifo]
build_src_filter =
    ${env.build_src_filter}
    +<examples/fifo>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1

[env:FifoSlab]
build_src_filter =
    ${env.build_src_filter}
    +<examples/fifo-slab>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
	-DCONFIG_KERNEL_TIME_SLICE_US=4000
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0

[env:Flags]
build_src_filter =
    ${env.build_src_filter}
    +<examples/flags>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_COOPERATIVE_THREADS=1
	-DCONFIG_DEFAULT_KERNEL_SYSCLOCK_PERIOD_US=250000
	-DCONFIG_KERNEL_TIME_SLICE_US=250000
	-DCONFIG_STDIO_USART=0
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_KERNEL_THREAD_IDLE=1
	-DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
	-DCONFIG_THREAD_MAIN_STACK_SIZE=512
	-DCONFIG_INTERRUPT_POLICY=1
	-DCONFIG_KERNEL_ASSERT=1
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0

[env:Footprint]
build_src_filter =
    ${env.build_src_filter}
    +<examples/footprint>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_THREAD_IDLE=0
	-DCONFIG_THREAD_EXPLICIT_MAIN_STACK=0
	-DCONFIG_STDIO_USART=-1
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_INTERRUPT_POLICY=1
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000
	-DCONFIG_KERNEL_TIME_SLICE_US=1000
	-DCONFIG_KERNEL_FAULT_VERBOSITY=0

[env:HelloWorld]
build_src_filter =
    ${env.build_src_filter}
    +<examples/hello-world>

build_flags =
    ${env.build_flags}
	-DCONFIG_SERIAL_AUTO_INIT=1
	-DCONFIG_SERIAL_USART_BAUDRATE=115200
	-DCONFIG_STDIO_USART=0 # redirect printf to USART0

[env:Idle]
build_src_filter =
    ${env.build_src_filter}
    +<examples/idle>

build_flags =
    ${env.build_flags}
	-DCONFIG_THREAD_IDLE_COOPERATIVE=0
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=10000
	-DCONFIG_KERNEL_TIME_SLICE_US=10000
	-DCONFIG_STDIO_USART=0
	-DCONFIG_KERNEL_UPTIME=0
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0
	-DCONFIG_KERNEL_ASSERT=1
	-DCONFIG_KERNEL_THREAD_IDLE=0

[env:InterruptYield]
build_src_filter =
    ${env.build_src_filter}
    +<examples/interrupt-yield>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_COOPERATIVE_THREADS=1
	-DCONFIG_KERNEL_TIME_SLICE_US=16000
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_KERNEL_API_NOINLINE=0

[env:IsrUnpend]
build_src_filter =
    ${env.build_src_filter}
    +<examples/isr-unpend>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0
	-DCONFIG_INTERRUPT_POLICY=1
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=400000
	-DCONFIG_KERNEL_TIME_SLICE_US=400000
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_KERNEL_SYSTICK_GPIOB_DEBUG=0x40

[env:Logging]
build_src_filter =
    ${env.build_src_filter}
    +<examples/logging>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_THREAD_IDLE=1
	-DCONFIG_THREAD_EXPLICIT_MAIN_STACK=0
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_INTERRUPT_POLICY=1
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000
	-DCONFIG_KERNEL_TIME_SLICE_US=1000
	-DCONFIG_STDIO_USART=0
	-DCONFIG_LOGGING_SUBSYSTEM=1
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0

[env:MainStack]
build_src_filter =
    ${env.build_src_filter}
    +<examples/main-stack>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_COOPERATIVE_THREADS=1
	-DCONFIG_DEFAULT_KERNEL_SYSCLOCK_PERIOD_US=10000
	-DCONFIG_KERNEL_TIME_SLICE_US=10000
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_KERNEL_THREAD_IDLE=0
	-DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
	-DCONFIG_THREAD_MAIN_STACK_SIZE=1024
	-DCONFIG_INTERRUPT_POLICY=1
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0

[env:ManyThreads]
build_src_filter =
    ${env.build_src_filter}
    +<examples/many-threads>

build_flags =
    ${env.build_flags}
	-DCONFIG_INTERRUPT_POLICY=1
	-DCONFIG_KERNEL_THREAD_IDLE=0
	-DCONFIG_THREAD_MAIN_STACK_SIZE=0x60
	-DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
	-DCONFIG_THREAD_MAIN_COOPERATIVE=0
	-DCONFIG_STDIO_USART=0
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000
	-DCONFIG_KERNEL_TIME_SLICE_US=1000
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=1
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_THREAD_STACK_SENTINEL=1
	-DCONFIG_ASSERT=1

[env:MemSlab]
build_src_filter =
    ${env.build_src_filter}
    +<examples/mem_slab>

build_flags =
    ${env.build_flags}
	-DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0
	-DCONFIG_KERNEL_ASSERT=1
	-DCONFIG_THREAD_MAIN_STACK_SIZE=0x80
	-DCONFIG_THREAD_STACK_SENTINEL=1
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_STDIO_USART=0
	-DCONFIG_KERNEL_UPTIME=1

[env:MinimalExample]
build_src_filter =
    ${env.build_src_filter}
    +<examples/minimal-example>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_COOPERATIVE_THREADS=1
	-DCONFIG_KERNEL_TIME_SLICE_US=1000
	-DCONFIG_INTERRUPT_POLICY=1
	-DCONFIG_KERNEL_THREAD_TERMINATION_TYPE=-1
	-DCONFIG_THREAD_MAIN_COOPERATIVE=1
	-DCONFIG_STDIO_USART=0
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0

[env:Msgq]
build_src_filter =
    ${env.build_src_filter}
    +<examples/msgq>

build_flags =
    ${env.build_flags}
	-DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0
	-DCONFIG_KERNEL_ASSERT=1
	-DCONFIG_THREAD_MAIN_STACK_SIZE=0x64

[env:MultithreadingSwitchingFrequency]
build_src_filter =
    ${env.build_src_filter}
    +<examples/multithreading-switching-frequency>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_COOPERATIVE_THREADS=0

[env:MutexMultithreadingDemo]
build_src_filter =
    ${env.build_src_filter}
    +<examples/mutex-multithreading-demo>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_COOPERATIVE_THREADS=1
	-DCONFIG_THREAD_MAIN_COOPERATIVE=0
	-DCONFIG_KERNEL_TIME_SLICE_US=16000
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0
	-DCONFIG_KERNEL_THREAD_IDLE=0
	-DCONFIG_KERNEL_ASSERT=1

[env:MutexMultithreadingTest]
build_src_filter =
    ${env.build_src_filter}
    +<examples/mutex-multithreading-test>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_COOPERATIVE_THREADS=1
	-DCONFIG_KERNEL_TIME_SLICE_US=16000
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0

[env:ObjectReservation]
build_src_filter =
    ${env.build_src_filter}
    +<examples/object-reservation>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000000
	-DCONFIG_KERNEL_TIME_SLICE_US=1000000
	-DCONFIG_KERNEL_UPTIME=0
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=1
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=1
	-DCONFIG_KERNEL_ASSERT=1

[env:PerfMsgq]
build_src_filter =
    ${env.build_src_filter}
    +<examples/perf-msgq>

build_flags =
    ${env.build_flags}
	-DCONFIG_THREAD_EXPLICIT_MAIN_STACK=0
	-DCONFIG_THREAD_CANARIES=1

[env:PremptMultithreadingDemo]
build_src_filter =
    ${env.build_src_filter}
    +<examples/prempt-multithreading-demo>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_COOPERATIVE_THREADS=1
	-DCONFIG_KERNEL_TIME_SLICE_US=250000
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=1
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0
	-DCONFIG_KERNEL_DEBUG_PREEMPT_UART=1

[env:Prng]
build_src_filter =
    ${env.build_src_filter}
    +<examples/prng>

build_flags =
    ${env.build_flags}


[env:Reentrancy]
build_src_filter =
    ${env.build_src_filter}
    +<examples/reentrancy>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0
	-DCONFIG_KERNEL_API_NOINLINE=1
	-DCONFIG_KERNEL_THREAD_TERMINATION_TYPE=1
	-DCONFIG_KERNEL_REENTRANCY=1

[env:Ring]
build_src_filter =
    ${env.build_src_filter}
    +<examples/ring>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_COOPERATIVE_THREADS=1
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000
	-DCONFIG_KERNEL_TIME_SLICE_US=10000
	-DCONFIG_STDIO_USART=0
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_KERNEL_THREAD_IDLE=1
	-DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
	-DCONFIG_THREAD_MAIN_STACK_SIZE=512
	-DCONFIG_THREAD_MAIN_COOPERATIVE=0
	-DCONFIG_INTERRUPT_POLICY=1
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=1
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0

[env:RingDemo]
build_src_filter =
    ${env.build_src_filter}
    +<examples/ring-demo>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_COOPERATIVE_THREADS=1
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000
	-DCONFIG_KERNEL_TIME_SLICE_US=10000
	-DCONFIG_STDIO_USART=0
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_KERNEL_THREAD_IDLE=1
	-DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
	-DCONFIG_THREAD_MAIN_STACK_SIZE=512
	-DCONFIG_THREAD_MAIN_COOPERATIVE=0
	-DCONFIG_INTERRUPT_POLICY=1
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0

[env:Rt]
build_src_filter =
    ${env.build_src_filter}
    +<examples/rt>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0
	-DCONFIG_INTERRUPT_POLICY=0
	-DCONFIG_THREAD_DEFAULT_SREG=0

[env:SchedLock]
build_src_filter =
    ${env.build_src_filter}
    +<examples/sched-lock>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_COOPERATIVE_THREADS=1
	-DCONFIG_KERNEL_TIME_SLICE_US=5000
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0
	-DCONFIG_KERNEL_API_NOINLINE=1

[env:SemaphoreMultithreadingDemo]
build_src_filter =
    ${env.build_src_filter}
    +<examples/semaphore-multithreading-demo>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_COOPERATIVE_THREADS=1
	-DCONFIG_KERNEL_TIME_SLICE_US=16000
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0

[env:Shell]
build_src_filter =
    ${env.build_src_filter}
    +<examples/shell>

build_flags =
    ${env.build_flags}
	-DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
	-DCONFIG_THREAD_MAIN_STACK_SIZE=0x100
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0
	-DCONFIG_KERNEL_ASSERT=1
	-DCONFIG_KERNEL_THREAD_IDLE_ADD_STACK=0x60
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_STDIO_USART=0
	-DCONFIG_THREAD_CANARIES=1

[env:Signal]
build_src_filter =
    ${env.build_src_filter}
    +<examples/signal>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_STDIO_USART=0
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=200000
	-DCONFIG_KERNEL_TIME_SLICE_US=200000

[env:StackSentinel]
build_src_filter =
    ${env.build_src_filter}
    +<examples/stack-sentinel>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_STDIO_USART=0
	-DCONFIG_THREAD_STACK_CANARY=1
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_THREAD_STACK_SENTINEL=1
	-DCONFIG_THREAD_STACK_SENTINEL_SIZE=1
	-DCONFIG_THREAD_MAIN_MONITOR=1
	-DCONFIG_KERNEL_FAULT_VERBOSITY=2
	-DCONFIG_THREAD_MONITOR=1
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0

[env:Stdio]
build_src_filter =
    ${env.build_src_filter}
    +<examples/stdio>

build_flags =
    ${env.build_flags}
	-DCONFIG_SERIAL_AUTO_INIT=1
	-DCONFIG_SERIAL_USART_BAUDRATE=115200
	-DCONFIG_STDIO_USART=0

[env:Sysclock]
build_src_filter =
    ${env.build_src_filter}
    +<examples/sysclock>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=250000
	-DCONFIG_KERNEL_TIME_SLICE_US=250000
	-DCONFIG_KERNEL_UPTIME=0
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=1
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0

[env:SystemWorkqueue]
build_src_filter =
    ${env.build_src_filter}
    +<examples/system-workqueue>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_TIME_SLICE_US=1000
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0
	-DCONFIG_SYSTEM_WORKQUEUE_ENABLE=1
	-DCONFIG_KERNEL_API_NOINLINE=0

[env:ThreadEvSpawn]
build_src_filter =
    ${env.build_src_filter}
    +<examples/thread-ev-spawn>

build_flags =
    ${env.build_flags}
	-DCONFIG_STDIO_USART=0
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000u
	-DCONFIG_KERNEL_TIME_SLICE_US=1000u
	-DCONFIG_THREAD_CANARIES=1u
	-DCONFIG_THREAD_MAIN_COOPERATIVE=1

[env:ThreadJoin]
build_src_filter =
    ${env.build_src_filter}
    +<examples/thread-join>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
	-DCONFIG_KERNEL_TIME_SLICE_US=1000000
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=100000
	-DCONFIG_KERNEL_ASSERT=1
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_KERNEL_UPTIME=0
	-DCONFIG_KERNEL_THREAD_TERMINATION_TYPE=1
	-DCONFIG_THREAD_JOIN=1

[env:ThreadPrioMultiq]
build_src_filter =
    ${env.build_src_filter}
    +<examples/thread-prio-multiq>

build_flags =
    ${env.build_flags}
	-DCONFIG_THREAD_CANARIES=0
	-DCONFIG_THREAD_STACK_SENTINEL=0
	-DCONFIG_STDIO_USART=0
	-DCONFIG_INTERRUPT_POLICY=1
	-DCONFIG_THREAD_PRIO_MULTIQ=1

[env:ThreadTermination]
build_src_filter =
    ${env.build_src_filter}
    +<examples/thread-termination>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
	-DCONFIG_KERNEL_TIME_SLICE_US=1000000
	-DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=100000
	-DCONFIG_KERNEL_ASSERT=1
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_KERNEL_UPTIME=0
	-DCONFIG_KERNEL_THREAD_TERMINATION_TYPE=1

[env:Time]
build_src_filter =
    ${env.build_src_filter}
    +<examples/time>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_KERNEL_TIME_API=1
	-DCONFIG_STDIO_USART=0

[env:Timers]
build_src_filter =
    ${env.build_src_filter}
    +<examples/timers>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_ASSERT=1
	-DCONFIG_THREAD_STACK_SENTINEL=1
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
	-DCONFIG_KERNEL_TIME_SLICE_US=10000
	-DCONFIG_KERNEL_TIMERS=1
	-DCONFIG_KERNEL_THREAD_IDLE_ADD_STACK=0x60
	-DCONFIG_STDIO_USART=0

[env:Uptime]
build_src_filter =
    ${env.build_src_filter}
    +<examples/uptime>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_ASSERT=1
	-DCONFIG_STDIO_USART=0
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
	-DCONFIG_KERNEL_TIME_SLICE_US=1000
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_KERNEL_API_NOINLINE=1
	-DCONFIG_THREAD_CANARIES=1

[env:V2]
build_src_filter =
    ${env.build_src_filter}
    +<examples/v2>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_UPTIME=1

[env:WaitVariants]
build_src_filter =
    ${env.build_src_filter}
    +<examples/wait-variants>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_UPTIME=1
	-DCONFIG_STDIO_USART=0

[env:WorkqDelayable]
build_src_filter =
    ${env.build_src_filter}
    +<examples/workq-delayable>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_TIME_SLICE_US=1000
	-DCONFIG_SYSTEM_WORKQUEUE_ENABLE=1
	-DCONFIG_STDIO_USART=0
	-DCONFIG_WORKQUEUE_DELAYABLE=1
	-DCONFIG_KERNEL_EVENTS=1

[env:Workqueue]
build_src_filter =
    ${env.build_src_filter}
    +<examples/workqueue>

build_flags =
    ${env.build_flags}
	-DCONFIG_KERNEL_TIME_SLICE_US=1000
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0

[env:ZephyrDevUsartTool]
build_src_filter =
    ${env.build_src_filter}
    +<examples/zephyr-dev-usart-tool>

build_flags =
    ${env.build_flags}
	-DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
	-DCONFIG_THREAD_MAIN_STACK_SIZE=0x100
	-DCONFIG_THREAD_CANARIES=1
	-DCONFIG_KERNEL_SYSCLOCK_DEBUG=0
	-DCONFIG_KERNEL_SCHEDULER_DEBUG=0
	-DCONFIG_STDIO_USART=0
	-DCONFIG_KERNEL_THREAD_IDLE_ADD_STACK=50
	-DCONFIG_SYSTEM_WORKQUEUE_ENABLE=1
	-DCONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=0x200
	-DCONFIG_DRIVERS_USART1_ASYNC=1
